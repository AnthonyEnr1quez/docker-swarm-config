version: "3.8"

# http://jell.yfish.us/
# https://support.plex.tv/articles/201543147-what-network-ports-do-i-need-to-allow-through-my-firewall/
services:
  plex:
    image: plexinc/pms-docker
    env_file: .env
    container_name: plex
    network_mode: host
    restart: unless-stopped
    environment:
      - 'ADVERTISE_IP=http://$humpback:32400/,https://plex.example.com/'
      - 'ALLOWED_NETWORKS=192.168.1.0/24,172.16.0.0/12'
    volumes:
      - /mnt/nas1/plex/config:/config
      - /mnt/nas1/plex/transcode:/transcode
      - /mnt/nas1/data/media:/media